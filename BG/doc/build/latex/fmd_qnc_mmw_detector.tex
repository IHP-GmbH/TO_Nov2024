%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax
\ifdefined\pdfimageresolution
    \pdfimageresolution= \numexpr \dimexpr1in\relax/\sphinxpxdimen\relax
\fi
%% let collapsible pdf bookmarks panel have high depth per default
\PassOptionsToPackage{bookmarksdepth=5}{hyperref}

\PassOptionsToPackage{booktabs}{sphinx}
\PassOptionsToPackage{colorrows}{sphinx}

\PassOptionsToPackage{warn}{textcomp}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
% support both utf8 and utf8x syntaxes
  \ifdefined\DeclareUnicodeCharacterAsOptional
    \def\sphinxDUC#1{\DeclareUnicodeCharacter{"#1}}
  \else
    \let\sphinxDUC\DeclareUnicodeCharacter
  \fi
  \sphinxDUC{00A0}{\nobreakspace}
  \sphinxDUC{2500}{\sphinxunichar{2500}}
  \sphinxDUC{2502}{\sphinxunichar{2502}}
  \sphinxDUC{2514}{\sphinxunichar{2514}}
  \sphinxDUC{251C}{\sphinxunichar{251C}}
  \sphinxDUC{2572}{\textbackslash}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}



\usepackage{tgtermes}
\usepackage{tgheros}
\renewcommand{\ttdefault}{txtt}



\usepackage[Bjarne]{fncychap}
\usepackage{sphinx}

\fvset{fontsize=auto}
\usepackage{geometry}


% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}


\usepackage{sphinxmessages}




\title{FMD\_QNC\_mmW\_detector}
\date{Dec 18, 2024}
\release{0.1}
\author{oliver munz}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{Release}
\makeindex
\begin{document}

\ifdefined\shorthandoff
  \ifnum\catcode`\=\string=\active\shorthandoff{=}\fi
  \ifnum\catcode`\"=\active\shorthandoff{"}\fi
\fi

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}


\begin{sphinxadmonition}{warning}{Warning:}
\sphinxAtStartPar
this chip is mostly done using an unfinished PDK. LVS was done only for parts.
\end{sphinxadmonition}

\noindent{\hspace*{\fill}\sphinxincludegraphics{{CMOS_chip}.png}\hspace*{\fill}}

\sphinxAtStartPar


\sphinxstepscope


\chapter{CMOS only designs}
\label{\detokenize{specification:cmos-only-designs}}\label{\detokenize{specification::doc}}
\sphinxAtStartPar
this is a chip to test the following circuits:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} \begin{description}
\sphinxlineitem{an 3.3V OTA}\begin{itemize}
\item {} 
\sphinxAtStartPar
an input common\sphinxhyphen{}mode\sphinxhyphen{}range from \textless{} VSS to VDD \sphinxhyphen{} 500mV

\item {} 
\sphinxAtStartPar
bias current programmable via resistor

\item {} 
\sphinxAtStartPar
gain about 70dB

\item {} 
\sphinxAtStartPar
offset in \textless{} 5mV

\end{itemize}

\end{description}

\item {} \begin{description}
\sphinxlineitem{a band gap design using this OTA.}\begin{itemize}
\item {} 
\sphinxAtStartPar
option to make an low\sphinxhyphen{}pass

\item {} 
\sphinxAtStartPar
option to adjust the delta temperature coefficient zero

\end{itemize}

\end{description}

\item {} \begin{description}
\sphinxlineitem{a shunt\sphinxhyphen{}regulator for 3.3V}\begin{itemize}
\item {} 
\sphinxAtStartPar
should heat until 50mA

\item {} 
\sphinxAtStartPar
option to disable and measure the shunt current

\end{itemize}

\end{description}

\item {} \begin{description}
\sphinxlineitem{a high dropout 1.8V regulator}\begin{itemize}
\item {} 
\sphinxAtStartPar
should be powered by the 3.3V

\item {} 
\sphinxAtStartPar
low output impedance

\item {} 
\sphinxAtStartPar
high power supply rejection

\end{itemize}

\end{description}

\item {} \begin{description}
\sphinxlineitem{two different mmW detector designs}\begin{itemize}
\item {} 
\sphinxAtStartPar
dipole/diode detector

\item {} 
\sphinxAtStartPar
a 1 diode design as reference of a

\item {} 
\sphinxAtStartPar
10 serial connected diode design

\end{itemize}

\end{description}

\item {} 
\sphinxAtStartPar
iHPs standard IO\sphinxhyphen{}cells for analog signal, VSS, VDD and IOVSS, IOVDD

\item {} 
\sphinxAtStartPar
a schottky diode, for measurements

\item {} 
\sphinxAtStartPar
a fuse/resistor combination to test the possibility of fuse\sphinxhyphen{}trimming

\end{enumerate}


\section{pinout}
\label{\detokenize{specification:pinout}}
\noindent{\hspace*{\fill}\sphinxincludegraphics{{pinout}.eps}\hspace*{\fill}}


\section{signals}
\label{\detokenize{specification:signals}}

\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
pin name
&\sphinxstyletheadfamily 
\sphinxAtStartPar
whats it
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook\sphinxstyletheadfamily 
\sphinxAtStartPar
fuse
&
\sphinxAtStartPar
fuse experiment
\\
\sphinxhline\sphinxstyletheadfamily 
\sphinxAtStartPar
det
&
\sphinxAtStartPar
dipole detector
\\
\sphinxhline\sphinxstyletheadfamily 
\sphinxAtStartPar
det10
&
\sphinxAtStartPar
10x serial dipole detectors
\\
\sphinxhline\sphinxstyletheadfamily 
\sphinxAtStartPar
schottky
&
\sphinxAtStartPar
test\sphinxhyphen{}diode
\\
\sphinxhline\sphinxstyletheadfamily 
\sphinxAtStartPar
OTA+
&
\sphinxAtStartPar
non\sphinxhyphen{}inverting OTA input
\\
\sphinxhline\sphinxstyletheadfamily 
\sphinxAtStartPar
OTA\sphinxhyphen{}
&
\sphinxAtStartPar
inverting OTA input
\\
\sphinxhline\sphinxstyletheadfamily 
\sphinxAtStartPar
OTAo
&
\sphinxAtStartPar
OTA output
\\
\sphinxhline\sphinxstyletheadfamily 
\sphinxAtStartPar
shuntGND
&
\sphinxAtStartPar
shunt\sphinxhyphen{}regulators VSS connection. can be used to measure the current
\\
\sphinxhline\sphinxstyletheadfamily 
\sphinxAtStartPar
IOVDD
&
\sphinxAtStartPar
3.3V input and shunt\sphinxhyphen{}cathode if shuntGND is connected to IOVSS
\\
\sphinxhline\sphinxstyletheadfamily 
\sphinxAtStartPar
IOVSS
&
\sphinxAtStartPar
0V \sphinxhyphen{} connect to VSS
\\
\sphinxhline\sphinxstyletheadfamily 
\sphinxAtStartPar
VSS
&
\sphinxAtStartPar
0V \sphinxhyphen{} connect to IOVSS
\\
\sphinxhline\sphinxstyletheadfamily 
\sphinxAtStartPar
VDD
&
\sphinxAtStartPar
1.8V regulator output
\\
\sphinxhline\sphinxstyletheadfamily 
\sphinxAtStartPar
bias in
&
\sphinxAtStartPar
resistor from IOVDD sets the bias\sphinxhyphen{}currents of all OTAs
\\
\sphinxhline\sphinxstyletheadfamily 
\sphinxAtStartPar
ref out
&
\sphinxAtStartPar
band\sphinxhyphen{}gap voltage \sphinxhyphen{} high impedance output and regulator ref input. low\sphinxhyphen{}pass possible.
\\
\sphinxhline\sphinxstyletheadfamily 
\sphinxAtStartPar
ref cur
&
\sphinxAtStartPar
reference current source from IOVDD
\\
\sphinxhline\sphinxstyletheadfamily 
\sphinxAtStartPar
ref adj
&
\sphinxAtStartPar
resistor to IOVDD or IOVSS to trim the zero of the temperature coefficient
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\sphinxstepscope


\chapter{high voltage OTA}
\label{\detokenize{ota:high-voltage-ota}}\label{\detokenize{ota::doc}}
\sphinxAtStartPar
1.1. the OTA
the circuit should be used with iHPs PNP\sphinxhyphen{}device pnpMPA, so it should be working from VSS. this called for an PMOS input. the design is a simplified version of
\sphinxcode{\sphinxupquote{The Recycling Folded Cascode: A General
Enhancement of the Folded Cascode Amplifier}}

\sphinxAtStartPar
because of the used CMOS\sphinxhyphen{}process the PMOS transistors could have an isolated bulk, without special effort. the simulations showed that the isolated versions had a bigger gain, but a smaller common\sphinxhyphen{}mode\sphinxhyphen{}range, and i preferred the later.
the bias\sphinxhyphen{}current is programmable an so also the band\sphinxhyphen{}width. the bias\sphinxhyphen{}voltages should allow wide\sphinxhyphen{}swing output voltages.
in the space the circuit uses are 3 MiM\sphinxhyphen{}capacitors placed. they are intended to use for frequency\sphinxhyphen{}compensation or as power\sphinxhyphen{}rail decoupling.


\section{OTA}
\label{\detokenize{ota:ota}}
\noindent{\hspace*{\fill}\sphinxincludegraphics{{OTA3C}.eps}\hspace*{\fill}}


\section{bias generator}
\label{\detokenize{ota:bias-generator}}
\noindent{\hspace*{\fill}\sphinxincludegraphics{{OTA33_BiAS}.eps}\hspace*{\fill}}


\section{layout}
\label{\detokenize{ota:layout}}
\noindent{\hspace*{\fill}\sphinxincludegraphics{{OTA_layout}.png}\hspace*{\fill}}

\sphinxAtStartPar



\section{simulations}
\label{\detokenize{ota:simulations}}
\sphinxAtStartPar
using different bias\sphinxhyphen{}currents of 1, 3 and 10ÂµA a few simulations are printed into a PDF that allow to see the gain, common\sphinxhyphen{}mode\sphinxhyphen{}range, bandwidth and a slew\sphinxhyphen{}rate:

\sphinxAtStartPar
\sphinxcode{\sphinxupquote{PDF with Xyce simulations .ac .dc .trans}}

\sphinxAtStartPar
the schematics of this simulations is \sphinxcode{\sphinxupquote{Xschem document}}


\section{ETHZ feedback}
\label{\detokenize{ota:ethz-feedback}}
\sphinxAtStartPar
its a bit stupid to design OTAs that fit in a square, if there is no such space\sphinxhyphen{}requirement. the layout should be changed to minimize the conductor\sphinxhyphen{}length of the signals between the differential\sphinxhyphen{}stage and the current\sphinxhyphen{}mirrors.

\sphinxstepscope


\chapter{band gap reference}
\label{\detokenize{reference:band-gap-reference}}\label{\detokenize{reference::doc}}
\sphinxAtStartPar
the shunt\sphinxhyphen{}regulator has to limit the supply\sphinxhyphen{}voltage to 3.3V. it should be usable to 50mA.


\section{schematic}
\label{\detokenize{reference:schematic}}
\noindent{\hspace*{\fill}\sphinxincludegraphics{{bg}.eps}\hspace*{\fill}}


\section{layout}
\label{\detokenize{reference:layout}}
\noindent{\hspace*{\fill}\sphinxincludegraphics{{bg_layout}.png}\hspace*{\fill}}


\section{simulation}
\label{\detokenize{reference:simulation}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{PDF with Xyce simulation}}


\section{LVS}
\label{\detokenize{reference:lvs}}
\sphinxAtStartPar
LVS wasnât working. and there are differences between layout and schematics

\sphinxstepscope


\chapter{voltage\sphinxhyphen{}regulators}
\label{\detokenize{regulators:voltage-regulators}}\label{\detokenize{regulators::doc}}

\section{shunt\sphinxhyphen{}regulator}
\label{\detokenize{regulators:shunt-regulator}}
\sphinxAtStartPar
the shunt\sphinxhyphen{}regulator has to limit the supply\sphinxhyphen{}voltage to 3.3V. it should be usable to 50mA. the regulating current flows thru M11. and to allow this the pin SHUNT\_GND needs to be connected to VSS. optional over an current\sphinxhyphen{}meter.

\sphinxAtStartPar
in the layout the left/top OTA is used in this circuit.


\section{serial\sphinxhyphen{}regulator}
\label{\detokenize{regulators:serial-regulator}}
\sphinxAtStartPar
the serial regulator should produce 1.8V for low\sphinxhyphen{}voltage MOSFETs. the OTA responsible for this regulator is left/bottom in the layout.


\section{schematic}
\label{\detokenize{regulators:schematic}}
\noindent{\hspace*{\fill}\sphinxincludegraphics{{regs}.eps}\hspace*{\fill}}


\section{layout}
\label{\detokenize{regulators:layout}}
\noindent{\hspace*{\fill}\sphinxincludegraphics{{regs_layout}.png}\hspace*{\fill}}


\section{simulations}
\label{\detokenize{regulators:simulations}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{PDF with Xyce simulation}}


\section{LVS}
\label{\detokenize{regulators:lvs}}
\sphinxAtStartPar
LVS wasnât working

\sphinxstepscope


\chapter{iHPs IO\sphinxhyphen{}CELLs}
\label{\detokenize{io:ihps-io-cells}}\label{\detokenize{io::doc}}
\sphinxAtStartPar
for ESD protection the analog\sphinxhyphen{}IO\sphinxhyphen{}cells where used. the cells support two voltages. a 3.3V IO and a 1.8V core\sphinxhyphen{}voltage.

\sphinxAtStartPar
my problem using the cells was, that the openPDK LVS scripts didnât could verify the .GDS with the provided .CDL. so that simply hope, they are correct used.

\sphinxAtStartPar
one problem i had, using this cells was the space they demand. i was trying to make a minimal chip of about 0.5x1mm. but the filler.py\sphinxhyphen{}script wasnât able to produce enough GatPoly\sphinxhyphen{}fill to pass the maximum\sphinxhyphen{}DRC script.

\sphinxAtStartPar
this IO infrastructure needs at least a 1x1mm chip (according my experience).

\sphinxstepscope


\chapter{mmW diode detectors}
\label{\detokenize{detectors:mmw-diode-detectors}}\label{\detokenize{detectors::doc}}
\sphinxAtStartPar
there are two diode\sphinxhyphen{}detector designs to measure if serial circuits of detector diodes will increase the sensitivity of the sensor.


\section{layout}
\label{\detokenize{detectors:layout}}
\noindent{\hspace*{\fill}\sphinxincludegraphics{{detectors}.png}\hspace*{\fill}}

\sphinxAtStartPar


\sphinxstepscope


\chapter{experiments}
\label{\detokenize{tests:experiments}}\label{\detokenize{tests::doc}}

\section{test schottky diode}
\label{\detokenize{tests:test-schottky-diode}}
\sphinxAtStartPar
to measure the schottky\sphinxhyphen{}diode used in the mmW\sphinxhyphen{}detectors, a device is connected to bond\sphinxhyphen{}pads outside the power\sphinxhyphen{}ring.


\section{fuse}
\label{\detokenize{tests:fuse}}
\sphinxAtStartPar
to test the possibility of using fuses to trim band\sphinxhyphen{}gap\sphinxhyphen{}references and the like a test\sphinxhyphen{}structure with a resistor, parallel to a fuse, is connected to two pads outside the power\sphinxhyphen{}ring.

\sphinxstepscope


\chapter{design data and design process description}
\label{\detokenize{designdata:design-data-and-design-process-description}}\label{\detokenize{designdata::doc}}

\section{iHP 130nm BiCMOS process sg13g2}
\label{\detokenize{designdata:ihp-130nm-bicmos-process-sg13g2}}
\sphinxAtStartPar
the process is useable via iHPs openPDK:

\sphinxAtStartPar
source
\sphinxurl{https://github.com/IHP-GmbH/IHP-Open-PDK}

\sphinxAtStartPar
documentation
\sphinxurl{https://ihp-open-pdk-docs.readthedocs.io/en/latest/index.html}

\sphinxAtStartPar
open\sphinxhyphen{}source runs:
\sphinxurl{https://www.ihp-microelectronics.com/services/research-and-prototyping-service/fast-design-enablement/open-source-pdk}


\section{Xschem schematics:}
\label{\detokenize{designdata:xschem-schematics}}

\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
folder
&\sphinxstyletheadfamily 
\sphinxAtStartPar
for
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook\sphinxstyletheadfamily 
\sphinxAtStartPar
design\_data/xschem/cdl
&
\sphinxAtStartPar
symbols for Xschem schematics
\\
\sphinxhline\sphinxstyletheadfamily 
\sphinxAtStartPar
design\_data/xschem/OTA
&
\sphinxAtStartPar
design and simulation of the OTA
\\
\sphinxhline\sphinxstyletheadfamily 
\sphinxAtStartPar
design\_data/xschem/simulations
&
\sphinxAtStartPar
simulations of the voltage regulators
\\
\sphinxhline\sphinxstyletheadfamily 
\sphinxAtStartPar
design\_data/xschem/symbol
&
\sphinxAtStartPar
symbols for Xschem schematics
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}


\section{KLayout .GDS:}
\label{\detokenize{designdata:klayout-gds}}

\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
file
&\sphinxstyletheadfamily 
\sphinxAtStartPar
for
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook\sphinxstyletheadfamily 
\sphinxAtStartPar
design\_data/gds/FMD\_QNC\_mmW\_detector.gds.gz
&
\sphinxAtStartPar
layout of the chip
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\sphinxstepscope


\chapter{validation sometime in the farfar future}
\label{\detokenize{validation:validation-sometime-in-the-farfar-future}}\label{\detokenize{validation::doc}}
\sphinxAtStartPar
i cant waitâ¦

\begin{sphinxcontents}
\sphinxstylecontentstitle{Contents}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{index:id1}}{\hyperref[\detokenize{index:cmos-only-bicmos-chip}]{\sphinxcrossref{CMOS only BiCMOS chip ;)}}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{index:id2}}{\hyperref[\detokenize{index:background}]{\sphinxcrossref{background}}}

\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{index:id3}}{\hyperref[\detokenize{index:the-sg13g2-process}]{\sphinxcrossref{the sg13g2 process}}}

\end{itemize}

\end{itemize}
\end{sphinxcontents}


\chapter{background}
\label{\detokenize{index:background}}
\sphinxAtStartPar
to make first steps using iHPs openPDK, Xschem and KLayout designing a OTA was obvious. this part is DRC and LVS clean, verified also using commercial tools.

\sphinxAtStartPar
but thatâs also the only clean part on this chip from my perspective. its highly likely that the IO cells are perfect, but i couldnât verify this my self. the opensource LVS didnât was ready, and i hadnât the time to verify any other part then the OTA via LVS.


\chapter{the sg13g2 process}
\label{\detokenize{index:the-sg13g2-process}}
\sphinxAtStartPar
there are two kinds of GateOxyde: thick for high\sphinxhyphen{}voltage like 3.3V circuits and standard for 1.2..1.8V circuits. there are three different SiGe BjTs, but all are NPNs. while the Si\sphinxhyphen{}parasitic transistors are only PNP.



\renewcommand{\indexname}{Index}
\printindex
\end{document}